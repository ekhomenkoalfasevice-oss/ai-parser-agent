## AstroForecast Bot ‚Äî Product & Technical Specification

### 1. Purpose & Outcomes
- **Mission**: –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∞—Å—Ç—Ä–æ–ø—Ä–æ–≥–Ω–æ–∑ —Å –≤—ã—Å–æ–∫–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é (‚â§5‚ÄØ—Å) –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (–∫–æ—Ä–æ—Ç–∫–∏–π –∏ –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥–Ω–æ–∑, –∞—Ä—Ö–∏–≤, ¬´–≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π –≤–æ–ø—Ä–æ—Å¬ª, —Ä–∞—Å—Å—ã–ª–∫–∏) –ø–æ–ª–Ω–æ—Å—Ç—å—é –±–µ—Å–ø–ª–∞—Ç–Ω–æ –Ω–∞ –ø–µ—Ä–≤–æ–º —ç—Ç–∞–ø–µ.
- **Primary KPI**: 60‚ÄØ% –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞, 40‚ÄØ% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –æ—Ç–∫—Ä—ã–≤–∞—é—â–∏—Ö –¥–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥ –ø–æ—Å–ª–µ CTA, 30‚ÄØ% –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π –∑–∞ 7 –¥–Ω–µ–π. –ú–µ—Ç—Ä–∏–∫–∏ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è, –Ω–æ –ø–ª–∞—Ç–µ–∂–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã.
- **Scope**: Telegram-–±–æ—Ç + Telegram-–∫–∞–Ω–∞–ª ¬´–ì–ª–∞–≤–Ω–æ–µ –∞—Å—Ç—Ä–æ—Å–æ–±—ã—Ç–∏–µ –¥–Ω—è¬ª –Ω–∞ –µ–¥–∏–Ω–æ–º –±—ç–∫–µ–Ω–¥–µ (FastAPI + Celery). –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤ web/embed —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è –∫–∞–∫ Iteration 3, –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è –±—É–¥–µ—Ç –≤–∫–ª—é—á–µ–Ω–∞ –ø–æ–∑–∂–µ.

### 2. Personas & Core Jobs
- **Astro Explorer (free)**: 20‚Äì35 –ª–µ—Ç, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏, —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –∫ ¬´—Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–Ω—è¬ª. Job: –±—ã—Å—Ç—Ä–æ –ø–æ–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ –∫–ª—é—á–µ–≤–æ–π –∞–∫—Ü–µ–Ω—Ç.
- **Intentional Planner (paid)**: 25‚Äì40 –ª–µ—Ç, —Å—Ç—Ä–æ–∏—Ç –ø–ª–∞–Ω—ã –ø–æ —Ñ–∏–Ω–∞–Ω—Å–∞–º/–æ—Ç–Ω–æ—à–µ–Ω–∏—è–º, –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ –¥–µ—Ç–∞–ª—è—Ö –∏ –∞—Ä—Ö–∏–≤–µ. Job: —Å–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏—è —Å —Ç—Ä–∞–Ω–∑–∏—Ç–∞–º–∏, –ø–æ–ª—É—á–∏—Ç—å actionable —Å–æ–≤–µ—Ç—ã.
- **Seeker in Crisis (paid)**: –∏—â–µ—Ç –±—ã—Å—Ç—Ä—ã–π —Å–æ–≤–µ—Ç ¬´—á—Ç–æ –¥–µ–ª–∞—Ç—å —Å–µ–π—á–∞—Å¬ª. Job: –∑–∞–¥–∞—Ç—å —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π –≤–æ–ø—Ä–æ—Å –∏ –ø–æ–ª—É—á–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É 1 —Ä–∞–∑ –≤ –¥–µ–Ω—å.

### 3. Value Ladder & Future Monetization
1. **Free short forecast** ‚Üí –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –∏–Ω—Å–∞–π—Ç + CTA ¬´–†–∞—Å–∫—Ä—ã—Ç—å –ø–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥ (–±–µ—Ç–∞, –±–µ—Å–ø–ª–∞—Ç–Ω–æ)¬ª.
2. **Free full experience** ‚Üí –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–∞—Å–∫–ª–∞–¥—ã, –∞—Ä—Ö–∏–≤, ¬´–≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π –≤–æ–ø—Ä–æ—Å¬ª –±–µ–∑ –æ–ø–ª–∞—Ç—ã, –Ω–æ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏–Ω—Ç–µ—Ä–µ—Å–∞ –∫ –∫–∞–∂–¥–æ–º—É –º–æ–¥—É–ª—é.
3. **Telemetry prep** ‚Üí —Å–æ–±—ã—Ç–∏—è `intent_full`, `intent_sos`, `intent_archive` —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –±—É–¥—É—â–µ–π –≤–æ—Ä–æ–Ω–∫–∏.
4. **Retention mechanics**: –∞—Ä—Ö–∏–≤ —Å –ø–æ–º–µ—Ç–∫–æ–π ¬´—Å–±—ã–ª–æ—Å—å¬ª, —Ä–∞—Å—Å—ã–ª–∫–∏, –ø—É—à–∏ ¬´–ó–∞–¥–∞–π —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π –≤–æ–ø—Ä–æ—Å¬ª. –ü–ª–∞—Ç—ë–∂–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –∏ –ø–ª–∞–Ω—ã –æ—Å—Ç–∞–Ω—É—Ç—Å—è –≤ –±—ç–∫–ª–æ–≥–µ –¥–æ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏.

### 4. Feature Breakdown & Detailed Flows
#### 4.1 Onboarding & Profile Capture
- `/start` ‚Üí –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ, –∑–∞–ø—Ä–æ—Å –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è (–≤–∞–ª–∏–¥–∞—Ü–∏—è 1900‚Äì2020).
- –ü–æ—Å–ª–µ –¥–∞—Ç—ã: –∑–∞–ø—Ä–æ—Å –≤—Ä–µ–º–µ–Ω–∏ –∏ –≥–æ—Ä–æ–¥–∞ (—Ñ–æ—Ä–º–∞—Ç `—á—á:–º–º, –ì–æ—Ä–æ–¥`). –ï—Å–ª–∏ –ø—Ä–æ–ø—É—Å–∫ ‚Üí –¥–µ—Ñ–æ–ª—Ç 12:00 –∏ timezone –ø–æ IP.
- –ì–µ–æ–∫–æ–¥–µ—Ä (Nominatim/Photon) –ø–æ–ª—É—á–∞–µ—Ç lat/lon + tz.
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º SLA: ‚â§2 round-trips (–¥–∞—Ç–∞ ‚Üí –≤—Ä–µ–º—è/–≥–æ—Ä–æ–¥ ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ).

#### 4.2 Short Forecast (Free Tier)
- Input: `birth_profile`, `current_transits`, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —à–∞–±–ª–æ–Ω–∞ (`–°–∫–æ—Ä–æ—Å—Ç—å/–ì–ª—É–±–∏–Ω–∞/–û—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å`).
- Decision logic:
  - `–°–∫–æ—Ä–æ—Å—Ç—å` ‚Üí –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∏—Ç–æ–≤ (–ú–∞—Ä—Å, –õ—É–Ω–∞).
  - `–ì–ª—É–±–∏–Ω–∞` ‚Üí –∞–∫—Ü–µ–Ω—Ç—ã –Ω–∞ –ü–ª—É—Ç–æ–Ω/–ù–µ–ø—Ç—É–Ω/–°–∫–æ—Ä–ø–∏–æ–Ω—Å–∫–∏–µ —Ç—Ä–∞–Ω–∑–∏—Ç—ã.
  - `–û—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å` ‚Üí –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ –∫–≤–∞–¥—Ä–∞—Ç–æ–≤/–æ–ø–ø–æ–∑–∏—Ü–∏–π, —Ä–µ—Ç—Ä–æ–≥—Ä–∞–¥–Ω—ã–µ –ø–ª–∞–Ω–µ—Ç—ã.
- Output: 2‚Äì3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, ‚â§380 —Å–∏–º–≤–æ–ª–æ–≤, includes emoji + CTA button ¬´–ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥¬ª.
- Cache strategy: Redis keyed by `user_id + date`. –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å ‚Üí —Ç–æ—Ç –∂–µ —Ç–µ–∫—Å—Ç.

#### 4.3 Feature Unlock & Telemetry
- –ü–æ—Å–ª–µ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –ø—Ä–æ–≥–Ω–æ–∑–∞ –ø–æ–∫–∞–∑–∞—Ç—å –∫–∞—Ä—É—Å–µ–ª—å –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ (Inline keyboard + media).
- –ö–Ω–æ–ø–∫–∏: `–†–∞—Å–∫—Ä—ã—Ç—å –ø–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥ (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)`, `–ü–æ–∑–∂–µ`. –ù–∞–∂–∞—Ç–∏–µ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ `intent_full`.
- –í–º–µ—Å—Ç–æ –ø–ª–∞—Ç–µ–∂–µ–π –±–æ—Ç —Å—Ä–∞–∑—É –≤—ã–¥–∞—ë—Ç –ø–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ ¬´–ë–µ—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ, –¥–∞–π –∑–Ω–∞—Ç—å, –µ—Å–ª–∏ —Ö–æ—á–µ—Ç—Å—è –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç¬ª.
- –¢–µ–ª–µ–º–µ—Ç—Ä–∏—è: —Å—á–∏—Ç–∞–µ–º –¥–æ–ª—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–∂–∞–ª–∏ CTA, –∏ —É–¥–µ—Ä–∂–∞–Ω–∏–µ –ø–æ –¥–Ω—è–º ‚Äî —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è, –∫–æ–≥–¥–∞ –≤–∫–ª—é—á–∏–º –æ–ø–ª–∞—Ç—É.

#### 4.4 Full Forecast (Beta Access)
- –î–æ—Å—Ç—É–ø–µ–Ω –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º 1 —Ä–∞–∑ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–π –¥–µ–Ω—å (–≤—Ç–æ—Ä–∞—è –≤—ã–¥–∞—á–∞ ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π).
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–µ–∫—Ü–∏–π:
  1. `–§–∏–Ω–∞–Ω—Å—ã` ‚Äî –∞–∫—Ü–µ–Ω—Ç –Ω–∞ –ú–∞—Ä—Å/–Æ–ø–∏—Ç–µ—Ä/–í–µ–Ω–µ—Ä–∞ –≤ 2/8/10 –¥–æ–º–∞—Ö.
  2. `–õ—é–±–æ–≤—å/–æ—Ç–Ω–æ—à–µ–Ω–∏—è` ‚Äî –í–µ–Ω–µ—Ä–∞/–õ—É–Ω–∞/7 –¥–æ–º, —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç–æ–Ω.
  3. `–ó–¥–æ—Ä–æ–≤—å–µ` ‚Äî —Ä–∏—Ç–º—ã –õ—É–Ω—ã, —Ä–µ—Ç—Ä–æ–≥—Ä–∞–¥–Ω–æ—Å—Ç–∏, —Å–æ–≤–µ—Ç –ø–æ —Ç–µ–ª—É.
  4. `–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –¥–Ω—è` ‚Äî —Ñ–æ—Ä–º–∞—Ç: `—Ä–∏—Ç—É–∞–ª / –∞—Ñ—Ñ–∏—Ä–º–∞—Ü–∏—è / –¥–µ–π—Å—Ç–≤–∏–µ`.
- Output —Ñ–æ—Ä–º–∞—Ç: Markdown —Å —ç–º–æ–¥–∑–∏, bullet-—ã –¥–ª—è —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏.
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `forecasts` —Å `type=full`, `transit_snapshot`.

#### 4.5 Archive & Feedback
- `/archive` ‚Üí –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–∞—Ç –∫–Ω–æ–ø–∫–∞–º–∏, –∫–Ω–æ–ø–∫–∞ `–ü–æ–∫–∞–∑–∞—Ç—å –µ—â—ë`.
- –ü—Ä–æ—Å–º–æ—Ç—Ä ‚Üí —Ç–µ–∫—Å—Ç + –∫–Ω–æ–ø–∫–∏ `–°–±—ã–ª–æ—Å—å ‚úÖ / –ù–µ —Å–±—ã–ª–æ—Å—å ‚úñ`.
- Feedback —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –¥–ª—è personalization (LLM prompt –ø–æ–ª—É—á–∞–µ—Ç —Ç–µ–≥ `accuracy=high/low`).

#### 4.6 Emergency Question (¬´–≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π –≤–æ–ø—Ä–æ—Å¬ª)
- –î–æ—Å—Ç—É–ø–µ–Ω –∫–∞–∂–¥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ—Å–ª–µ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞, –ª–∏–º–∏—Ç 1/24h ‚Üí Redis TTL.
- Mini-chat —Ä–µ–∂–∏–º:
  1. Prompt: –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å—Ç–∏–ª—å, –º–∞–∫—Å–∏–º—É–º 120 —Å–ª–æ–≤, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –¥–∏—Å–∫–ª–µ–π–º–µ—Ä.
  2. –û—Ç–≤–µ—Ç –º–æ–∂–Ω–æ –ø–æ–¥–µ–ª–∏—Ç—å –Ω–∞ 2‚Äì3 —Å–æ–æ–±—â–µ–Ω–∏—è (–ø—Ä–æ–±–ª–µ–º–∞ ‚Üí —Å–æ–≤–µ—Ç ‚Üí next step).
  3. –ö–Ω–æ–ø–∫–∞ `–ó–∞–¥–∞—Ç—å –µ—â—ë –∑–∞–≤—Ç—Ä–∞` –≤—ã–≤–æ–¥–∏—Ç —Ç–∞–π–º–µ—Ä.

#### 4.7 Daily Broadcast ¬´–ì–ª–∞–≤–Ω–æ–µ –∞—Å—Ç—Ä–æ—Å–æ–±—ã—Ç–∏–µ –¥–Ω—è¬ª
- –ù–æ—á–Ω–æ–π Celery-beat job –≤—ã—á–∏—Å–ª—è–µ—Ç –∫–ª—é—á–µ–≤–æ–π —Ç—Ä–∞–Ω–∑–∏—Ç (–ø–æ –≤–µ—Å–∞–º: –∞—Å–ø–µ–∫—Ç * –±–ª–∏–∑–æ—Å—Ç—å * –≤–æ–≤–ª–µ—á—ë–Ω–Ω—ã–µ –ø–ª–∞–Ω–µ—Ç—ã).
- LLM –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç 250‚Äì300 —Å–∏–º–≤–æ–ª–æ–≤ + —Å–æ–≤–µ—Ç.
- –ü—É–±–ª–∏–∫–∞—Ü–∏—è:
  - Telegram –∫–∞–Ω–∞–ª (bot API `sendMessage`).
  - Push –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º (–æ–ø—Ü–∏—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö).

#### 4.8 Notifications & Retention
- –¢–∏–ø—ã:
  1. `daily_reminder` ‚Äî –µ—Å–ª–∏ –Ω–µ—Ç –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –ø—Ä–æ–≥–Ω–æ–∑–∞ –¥–æ 12:00 –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.
  2. `full_unlock_reminder` ‚Äî –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∏ —Ä–∞–∑—É –Ω–µ –Ω–∞–∂–∞–ª ¬´–†–∞—Å–∫—Ä—ã—Ç—å –ø–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥¬ª.
  3. `sos_invite` ‚Äî –µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è ¬´–≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π –≤–æ–ø—Ä–æ—Å¬ª –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å 3 –¥–Ω—è.
  4. `streak_cheer` ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Å–µ—Ä–∏–∏ ¬´3 –¥–Ω—è –ø–æ–¥—Ä—è–¥ —Ç—ã —Å–º–æ—Ç—Ä–∏—à—å –ø—Ä–æ–≥–Ω–æ–∑—ã¬ª.
- –ö–∞–Ω–∞–ª: Telegram push (bot sendMessage) + –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ email (Iter‚ÄØ3).

#### 4.9 Admin & Analytics
- Web dashboard (FastAPI + HTMX –∏–ª–∏ separate Next.js) —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ Telegram Login.
- KPI cards: –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏, MRR, –∫–æ–Ω–≤–µ—Ä—Å–∏—è, usage ¬´–≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π –≤–æ–ø—Ä–æ—Å¬ª.
- Manual broadcast composer.

### 5. Technical Architecture
| Layer | Responsibility | Tech Stack |
| --- | --- | --- |
| Bot Gateway | Webhook, FSM, keyboards, localization | FastAPI + aiogram v3, Redis FSM storage |
| Core API | Users, forecasts, access flags | FastAPI, SQLAlchemy, Pydantic |
| Astrology Service | –ù–∞—Ç–∞–ª + —Ç—Ä–∞–Ω–∑–∏—Ç—ã, caching eph data | pyswisseph, Swiss Ephemeris files |
| LLM Orchestrator | Prompt templates, guardrails, caching | LangChain / custom, OpenAI GPT‚Äë4.1 or GPT‚Äë4o-mini |
| Forecast Engine | Celery tasks, scheduling, daily broadcast | Celery workers + Redis broker |
| Storage | Primary data & caching | PostgreSQL 15, Redis 7, MinIO/S3 for logs |
| Observability | Logs, metrics, tracing | Prometheus, Grafana, Sentry |
| Future Billing (off) | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø–ª–∞—Ç–µ–∂–µ–π, –µ—Å–ª–∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º | Stars/Stripe/YooKassa (–∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ) |

Deployment: Docker images per service, docker-compose for dev, IaC (Terraform) for prod on Hetzner/Render. CI/CD via GitHub Actions (lint ‚Üí tests ‚Üí staging ‚Üí manual prod).

### 6. Data Model Deep Dive
- `users`: birth data, geo, timezone, notification toggles, consent flags.
- `natal_charts`: heavy JSON blobs (planet positions, houses, aspects) cached to avoid recomputation.
- `forecasts`: 
  - `content_short` (TEXT) + `content_full` (JSONB).
  - `metrics`: `speed_tag`, `depth_tag`, `caution_tag`.
- `access_flags`: `user_id`, `beta_full_enabled` (bool), `beta_sos_enabled`, `notes` ‚Äî —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–æ–º –±–µ–∑ –ø–ª–∞—Ç–µ–∂–µ–π (–∑–∞–º–µ–Ω—è–µ—Ç `subscriptions` –Ω–∞ MVP).
- `emergency_questions`: `question`, `answer`, `status` (pending/sent/error), `next_allowed_at`.
- `events_log`: append-only for analytics (user_id, event, payload JSONB).

### 7. LLM Prompt Strategy & Guardrails
- **Short forecast template**:
  - Inputs: `sun_sign`, `moon_phase`, top 3 transits, `speed/depth/caution` levels, `user_name?`.
  - Output: 2‚Äì3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, upbeat but balanced, includes emoji, CTA referencing –ø–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥.
- **Full forecast template**:
  - Structured JSON: `{"finance": {...}, "love": {...}, "health": {...}, "advice": {...}}`.
  - Each section ‚â§90 —Å–ª–æ–≤, —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ.
  - Post-processing –≤ Markdown, –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —ç–º–æ–¥–∑–∏ –∏ –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏—è.
- **Emergency prompt**:
  - Style: caring advisor, –º–∞–∫—Å–∏–º—É–º 120 —Å–ª–æ–≤, —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∏—Å–∫–ª–µ–π–º–µ—Ä ¬´–≠—Ç–æ –Ω–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è/–º–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è¬ª.
  - Safety filters: –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ (—Å–∞–º–æ–ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ, –º–µ–¥–∏—Ü–∏–Ω–∞) ‚Üí handoff —Å–∫—Ä–∏–ø—Ç—É (—Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–æ–¥–¥–µ—Ä–∂–∫–µ).
- **Fallback**: rule-based —Ç–µ–∫—Å—Ç, –µ—Å–ª–∏ LLM –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (predefined —à–∞–±–ª–æ–Ω—ã –Ω–∞ —Å–æ—á–µ—Ç–∞–Ω–∏—è –∑–Ω–∞–∫–æ–≤).

### 8. Conversation Prototypes (Expanded)
```startLine:endLine:docs/astro_bot_detailed_spec.md
// ... existing code ...
```

| Flow | Steps | Sample utterances |
| --- | --- | --- |
| **1. Onboarding** | `/start` ‚Üí –¥–∞—Ç–∞ ‚Üí –≤—Ä–µ–º—è/–≥–æ—Ä–æ–¥ ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ | –ë–æ—Ç: ¬´–ü—Ä–∏–≤–µ—Ç! ... –í–≤–µ–¥–∏ –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è (–¥–¥.–º–º.–≥–≥–≥–≥).¬ª ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ¬´12.07.1993¬ª ‚Üí –ë–æ—Ç: ¬´–ï—Å—Ç—å –ª–∏ –≤—Ä–µ–º—è –∏ –≥–æ—Ä–æ–¥? –ù–∞–ø–∏—à–∏ `—á—á:–º–º, –≥–æ—Ä–æ–¥` –∏–ª–∏ –Ω–∞–∂–º–∏ ‚Äú–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å‚Äù.¬ª ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ¬´10:45, –ú–æ—Å–∫–≤–∞¬ª ‚Üí –ë–æ—Ç: ¬´–°–ø–∞—Å–∏–±–æ! –°—á–∏—Ç–∞—é —Ç–≤–æ–π –∫–æ—Å–º–æ—Å‚Ä¶¬ª |
| **2. –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø—Ä–æ–≥–Ω–æ–∑** | —Ä–∞—Å—á—ë—Ç ‚Üí –≤—ã–≤–æ–¥ + CTA | –ë–æ—Ç: ¬´–°–µ–≥–æ–¥–Ω—è –õ—É–Ω–∞ —Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è —Å —Ç–≤–æ–∏–º –°–æ–ª–Ω—Ü–µ–º ‚Äî –≤—Å–ø–ª–µ—Å–∫ —ç–Ω–µ—Ä–≥–∏–∏. –î–µ–π—Å—Ç–≤—É–π –±—ã—Å—Ç—Ä–æ, –Ω–æ –ø—Ä–æ–≤–µ—Ä—å –¥–µ—Ç–∞–ª–∏. –†–∞—Å–∫—Ä—ã—Ç—å –ø–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥ –ø—Ä–æ —Ñ–∏–Ω–∞–Ω—Å—ã, –ª—é–±–æ–≤—å –∏ –∑–¥–æ—Ä–æ–≤—å–µ? –°–µ–π—á–∞—Å —ç—Ç–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ.¬ª –ö–Ω–æ–ø–∫–∏: `–†–∞—Å–∫—Ä—ã—Ç—å –ø–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥`, `–ü–æ–∑–∂–µ`. |
| **3. Feature unlock (–±–µ–∑ –æ–ø–ª–∞—Ç—ã)** | –Ω–∞–∂–∞—Ç–∏–µ CTA ‚Üí –ø–æ–∫–∞–∑ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ ‚Üí —Å—Ä–∞–∑—É —Ñ—É–ª–ª | –ë–æ—Ç: ¬´–ë–µ—Ç–∞-–¥–æ—Å—Ç—É–ø –æ—Ç–∫—Ä—ã—Ç: –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–∞—Å–∫–ª–∞–¥—ã, –∞—Ä—Ö–∏–≤ –∏ —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π –≤–æ–ø—Ä–æ—Å –¥–æ—Å—Ç—É–ø–Ω—ã –±–µ—Å–ø–ª–∞—Ç–Ω–æ. –î–µ–ª–∏—Å—å –æ—Ç–∑—ã–≤–æ–º!¬ª ‚Üí ¬´–í–æ—Ç —Ç–≤–æ–π –ø–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥.¬ª |
| **4. –ü–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥** | –≤—ã–¥–∞—á–∞ —Å–µ–∫—Ü–∏–π | –ë–æ—Ç: ¬´–§–∏–Ω–∞–Ω—Å—ã ‚Äî –ú–∞—Ä—Å –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –¥–µ–Ω–µ–∂–Ω—ã–π —Å–µ–∫—Ç–æ—Ä, –¥–æ–≥–æ–≤–æ—Ä–∏—Å—å –¥–æ –æ–±–µ–¥–∞. –õ—é–±–æ–≤—å ‚Äî –í–µ–Ω–µ—Ä–∞ –∏ –õ—É–Ω–∞ –≤ –≥–∞—Ä–º–æ–Ω–∏–∏, –≥–æ–≤–æ—Ä–∏ –æ —á—É–≤—Å—Ç–≤–∞—Ö. –ó–¥–æ—Ä–æ–≤—å–µ ‚Äî –ø–æ–º–æ–≥–∏ —Ç–µ–ª—É –≤–æ–¥–æ–π. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è ‚Äî –∞—Ñ—Ñ–∏—Ä–º–∞—Ü–∏—è ‚Äú–Ø –≤—ã–±–∏—Ä–∞—é –ª—ë–≥–∫–æ—Å—Ç—å –∏ —Ç–æ—á–Ω–æ—Å—Ç—å‚Äù.¬ª –ö–Ω–æ–ø–∫–∏: `–ê—Ä—Ö–∏–≤`, `–≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π –≤–æ–ø—Ä–æ—Å`, `–ù–∞—Å—Ç—Ä–æ–π–∫–∏`. |
| **5. –ê—Ä—Ö–∏–≤** | –≤—ã–±–æ—Ä –¥–∞—Ç—ã ‚Üí –ø–æ–∫–∞–∑ ‚Üí feedback | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ¬´–ê—Ä—Ö–∏–≤¬ª. –ë–æ—Ç: ¬´–í—ã–±–µ—Ä–∏ –¥–∞—Ç—É (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 7).¬ª ‚Üí –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞: ¬´–ü—Ä–æ–≥–Ω–æ–∑ –æ—Ç 12.11: ‚Ä¶ –ë—ã–ª–æ –ª–∏ –∞–∫—Ç—É–∞–ª—å–Ω–æ?¬ª –ö–Ω–æ–ø–∫–∏: `–°–±—ã–ª–æ—Å—å ‚úÖ`, `–ù–µ —Å–±—ã–ª–æ—Å—å ‚úñ`. |
| **6. –≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π –≤–æ–ø—Ä–æ—Å** | –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ ‚Üí –≤–æ–ø—Ä–æ—Å ‚Üí –æ—Ç–≤–µ—Ç | –ë–æ—Ç: ¬´–≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π –≤–æ–ø—Ä–æ—Å –¥–æ—Å—Ç—É–ø–µ–Ω 1 —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏. –ß—Ç–æ –≤–æ–ª–Ω—É–µ—Ç?¬ª ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ¬´–°—Ç–æ–∏—Ç –ª–∏ –±—Ä–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç?¬ª ‚Üí –ë–æ—Ç: ¬´–ú–µ—Ä–∫—É—Ä–∏–π –∞–∫—Ç–∏–≤–µ–Ω, –Ω–æ –∫–≤–∞–¥—Ä–∞—Ç –∫ –°–∞—Ç—É—Ä–Ω—É –ø—Ä–æ—Å–∏—Ç –¥–µ—Ç–∞–ª–µ–π. –í–æ–∑—å–º–∏ –ø–∞—É–∑—É, —Å–æ–±–µ—Ä–∏ —Ñ–∞–∫—Ç—ã, –∑–∞—Ç–µ–º —Ä–µ—à–∞–π. (–ü–æ–≤—Ç–æ—Ä–∏ –≤–æ–ø—Ä–æ—Å –∑–∞–≤—Ç—Ä–∞, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ).¬ª |
| **7. –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ** | —Ç—Ä–∏–≥–≥–µ—Ä push | –ë–æ—Ç: ¬´–¢—ã –µ—â—ë –Ω–µ –æ—Ç–∫—Ä—ã–ª –ø—Ä–æ–≥–Ω–æ–∑ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è. –õ—É–Ω–∞ –≤ –î–µ–≤–µ –ø–æ–¥–¥–µ—Ä–∂–∏—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî –∑–∞–≥–ª—è–Ω–∏, —á—Ç–æ–±—ã –Ω–∏—á–µ–≥–æ –Ω–µ —É–ø—É—Å—Ç–∏—Ç—å üí´.¬ª |
| **8. –≠–Ω–≥–∞–∂–º–µ–Ω—Ç –±–µ–∑ –æ–ø–ª–∞—Ç—ã** | CTA –Ω–∞ –æ—Ç–∑—ã–≤/–ø–æ–¥–¥–µ—Ä–∂–∫—É | –ë–æ—Ç: ¬´–ù—Ä–∞–≤–∏—Ç—Å—è –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø? –ü–æ–¥–µ–ª–∏—Å—å –æ—Ç–∑—ã–≤–æ–º –∏–ª–∏ –ø—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞ ‚Äî –Ω–∞–º –≤–∞–∂–Ω–æ –º–Ω–µ–Ω–∏–µ, —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.¬ª –ö–Ω–æ–ø–∫–∏: `–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤`, `–ü–æ–¥–µ–ª–∏—Ç—å—Å—è`. |

### 9. User Stories & Acceptance Criteria
- **US-001**: –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —è —Ö–æ—á—É –±—ã—Å—Ç—Ä–æ –≤–≤–µ—Å—Ç–∏ –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–≥–Ω–æ–∑. *AC*: –≤–∞–ª–∏–¥–∞—Ü–∏—è, –æ—à–∏–±–∫–∏ –Ω–∞ –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç, –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ ‚â§5‚ÄØ—Å.
- **US-010**: –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —è —Ö–æ—á—É –¥–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥ –æ–¥–∏–Ω —Ä–∞–∑ –≤ –¥–µ–Ω—å. *AC*: –¥–æ—Å—Ç—É–ø –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ CTA, –ø–æ–≤—Ç–æ—Ä –≤—ã–¥–∞—ë—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç.
- **US-020**: –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —è —Ö–æ—á—É –∑–∞–¥–∞—Ç—å —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π –≤–æ–ø—Ä–æ—Å. *AC*: –ª–∏–º–∏—Ç 1/24h, –µ—Å–ª–∏ –ª–∏–º–∏—Ç –∏—Å—á–µ—Ä–ø–∞–Ω ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –≤—Ä–µ–º—è —Å–ª–µ–¥—É—é—â–µ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏.
- **US-030**: –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —è —Ö–æ—á—É –æ—Ç–º–µ—á–∞—Ç—å ¬´—Å–±—ã–ª–æ—Å—å¬ª, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ —Å–æ–≤–µ—Ç—ã. *AC*: –≤—ã–±–æ—Ä –∫–Ω–æ–ø–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç feedback, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞ —ç–∫—Ä–∞–Ω–µ.
- **US-040**: –∫–∞–∫ –∞–¥–º–∏–Ω, —è —Ö–æ—á—É –≤–∏–¥–µ—Ç—å –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –¥–æ–ª—é —Ç–µ—Ö, –∫—Ç–æ –æ—Ç–∫—Ä—ã–ª –ø–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥. *AC*: –ø–∞–Ω–µ–ª—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `DAU`, `full_unlock_rate`, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ ‚â§15‚ÄØ–º–∏–Ω.

### 10. Roadmap & Work Breakdown
1. **Iteration 0 (Prep, 3‚Äì4‚ÄØ–¥–Ω—è)**
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, Docker, –±–∞–∑–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –º–∏–≥—Ä–∞—Ü–∏–∏.
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Telegram webhook + health checks.
2. **Iteration 1 (MVP, 2‚Äì3‚ÄØ–Ω–µ–¥–µ–ª–∏)**
   - –ü—Ä–æ—Ñ–∏–ª—å, –∫–æ—Ä–æ—Ç–∫–∏–π –ø—Ä–æ–≥–Ω–æ–∑, Swiss Ephemeris, LLM prompts, CTA –Ω–∞ –¥–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥ (–±–µ–∑ –æ–ø–ª–∞—Ç—ã), –ø–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥, –∞—Ä—Ö–∏–≤, –±–∞–∑–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.
3. **Iteration 2 (Engagement & Data, 2‚ÄØ–Ω–µ–¥–µ–ª–∏)**
   - –≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π –≤–æ–ø—Ä–æ—Å, –æ—Ü–µ–Ω–∫–∞ ¬´—Å–±—ã–ª–æ—Å—å¬ª, —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø—É—à–∏, Admin dashboard v1, —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –¥–ª—è –±—É–¥—É—â–µ–π –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏.
4. **Iteration 3 (Growth & Monetization prep, 2‚ÄØ–Ω–µ–¥–µ–ª–∏)**
   - –í–µ–±-–≤–∏–¥–∂–µ—Ç, –º–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ email-–∫–∞–Ω–∞–ª, –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞—Ç—ë–∂–Ω–æ–≥–æ –º–æ–¥—É–ª—è (–æ—Å—Ç–∞–≤–∏—Ç—å –≤—ã–∫–ª—é—á–µ–Ω–Ω—ã–º –¥–æ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è).

### 11. Testing & Observability Plan
- **Unit**: —Ç—Ä–∞–Ω–∑–∏—Ç—ã (–∞—Å—Ç—Ä–æ—Å–µ—Ä–≤–∏—Å), —Ñ–æ—Ä–º–∞—Ç–∞—Ç–æ—Ä—ã —Ç–µ–∫—Å—Ç–æ–≤, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.
- **Contract**: API endpoints (users/forecasts/subscriptions) —Å JSON schemas.
- **LLM QA**: golden prompts + snapshot —Ç–µ—Å—Ç—ã –Ω–∞ —Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç—å –∏ –¥–ª–∏–Ω—É.
- **Load**: —Ä–∞—Å—Å—ã–ª–∫–∞ 100k –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ‚â§5‚ÄØ–º–∏–Ω, Celery autoscaling.
- **Monitoring**: Prometheus (latency, queue depth), Grafana dashboards, Sentry alerts, log enrichment (request id, user id, prompt id).

### 12. Open Questions / Next Steps
- –£—Ç–æ—á–Ω–∏—Ç—å —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –ø–ª–∞—Ç—ë–∂–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (KYC?).
- –ù—É–∂–Ω–æ –ª–∏ —Ö—Ä–∞–Ω–∏—Ç—å IP/Device –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞? (–µ—Å–ª–∏ –¥–∞ ‚Äî GDPR notice).
- –†–µ—à–∏—Ç—å, –±—É–¥–µ—Ç –ª–∏ ¬´—Å–∫–æ—Ä–æ—Å—Ç—å/–≥–ª—É–±–∏–Ω–∞/–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å¬ª –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ —Ç—Ä–∞–Ω–∑–∏—Ç–∞–º.
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç-–≥–æ–ª–æ—Å –¥–ª—è –∫–∞–Ω–∞–ª–∞ (tone of voice guide).

–î–æ–∫—É–º–µ–Ω—Ç —Å–ª—É–∂–∏—Ç —Ä–∞–±–æ—á–∏–º –¢–ó –∏ –æ—Ç–ø—Ä–∞–≤–Ω–æ–π —Ç–æ—á–∫–æ–π –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–æ—Ç–∞. –°–ª–µ–¥—É—é—â–∏–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç ‚Äî —Å—Ö–µ–º—ã –ë–î/sequence –¥–∏–∞–≥—Ä–∞–º–º—ã –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã.
